node：节点
node的peer保留为peer。

原文链接：https://medium.com/algorand/towards-a-unified-metric-for-performance-evaluation-of-proof-of-stake-blockchains-e29a405d73ba

# 建立PoS区块链性能评估的统一度量标准

区块链系统需要扩展来处理每秒数以千计的交易，同时保持去中心化以及在强大的攻击面前是安全的。但是，去中心化，安全和性能总是发挥三方面的作用。一般都会在这三者之间做出权衡。这些性质是一个区块链系统的核心支柱。同时实现这三个性质对任何区块链系统来说都充满挑战。

## 公共度量

我们看到的生态系统中问题之一是缺乏一个公共框架分析所有所有区块链系统的性能。不同的项目取决完全不同的测度参数，令本来有意义的性能对比变得根本不可行。经常在未说明底层假设或者环境设置的情况下宣称tps达到数百，数千或者百万。

## 分析维度

我们要意识到影响区块链吞吐量（以TPS计量）有很多因素，这一点很重要。

1.许可模式 vs 非许可模式
一个区块链系统可以运行在非许可模式（人人可以加入系统）或者许可模式（用户必须被特殊批准加入并执行重要的功能）。

许可链系统通常更易构建和扩展，因为其不必担心在非许可链系统中可能的各种各样攻击（例如，女巫攻击）。


2.直接参与、委托或者权益池

单用户可以直接参与到共识协议或者将其“投票权”委托给代理池。或者只有专门挑选的用户池可以参与共识。

在理想的去中心化区块链中，每个用户都可以参与共识协议。

3.传播网络类型
了解是否使用P2P传播网络或者不可信的中继传播（或者内容分发）网络是很重要的。

在经典的区块链实例中，全部交易和共识消息会传播给每个节点。这意味着每个节点必须传播每条交易到其所有的peer。或者，使用中继传播网络来加速传播交易和消息。传播网络优化性能，但它们必须抵抗各种各样的额外攻击（例如，拒绝服务）以及不能引入自身的攻击（例如，中心化的中继不应该审查用户或者对区块链进行分叉）。

4.交易可见性

在标准的区块链实例中，全部的交易都记录在区块链上，供任何人查看。各种技术（例如，分片，闪电网络）被部署以实现区块链存储分片或者在链下执行交易。

这些技术通常在底层的共识协议之上构建一层。在分析性能时，必须详述多少交易在区块链上被显式追踪以及多少可以在链下处理。事实上，一些交易如果在链下处理，则意义不大或压根没有意义。

5.带宽分配

分配更多带宽的节点可以更快速地将区块传播到其所有的peer。在做一个区块链系统的性能分析时，对全部参与节点的带宽分配做出精确的假设是很重要的。

6.设想的安全模型
在安全性和性能之间总是有权衡。快速和不安全，这非常简单。事实上，区块链中的一切都可能被攻击。一个区块链系统应该在拜占庭节点攻击，对参与共识的节点的外部攻击（例如，拒绝服务）以及对激励机制的攻击和网络攻击等应该是安全的。

7.压缩机制
用于编码交易和区块的压缩机制的效果非常影响系统的总体性能。简介编码方案有助于最小化节点需要的带宽。所有的区块链系统必须表明底层交易大小或者通过网络传播的任何额外消息大小。

## 理论分析
作为一个例子，我们演示一个关于特定环境中交易速率的理论计算。

* 非许可模式
* 每个用户都能直接参与共识协议
* 全部的交易和区块都要通过P2P网络传播到系统中的每个节点。每个节点连着8个peer
* 全部交易都公开在区块链上
* 每个节点分配56Mb/s的上传带宽和112Mb/s的下载带宽（即分配给比特币用户的中位带宽）
* 每条交易被编码成200字节，且区块每秒确认。
* 共识协议就区块达成一致没有开销。

鉴于上述参数，一个区块链系统支持的极大吞吐量是（56Mb/s）/（200bytes*8peers）=4375TPS。
我们必须要强调，上述分析忽略了标准网络属性，例如丢包，传播或者传输延迟，系统中的用户数量以及重传等，因此给出了交易速率的上界。

## 走向标准化
我们认为开启一次有关区块链系统的理论分析和经验分析的标准化讨论是重要的。

Algorand致力于帮助社区浏览各种项目并澄清一些常见的混淆。在评估或者解释一个新的区块链项目时，我们鼓励社区考虑指定上述参数列表。

我们也鼓励社区对本博文进行评论，提更多的参数，我们将更新该列表以回应社区反馈。


